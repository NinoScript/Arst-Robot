/*
 * main.cc
 *
 *  Created on: Nov 9, 2012
 *      Author: lucho
 */

#include "pololu/3pi.h"

void adelante (int velmax){
	OrangutanMotors::setSpeeds(velmax,velmax);
}

void giroIzquierda (int velmax){
	int tProp = 1600/velmax; //1600 numero sacado de ejemplos de pololu
							//
	OrangutanMotors::setSpeeds(-velmax,velmax);
	delay_ms(tProp);
}

void detenerse(){
	OrangutanMotors::setSpeeds(0,0);
}

int ajustavelmax(){
	int max = 0;
	while(!button_is_pressed(BUTTON_B)){

	}
	return max;
}

int main (){
	while (1) {
		set_analog_mode(MODE_8_BIT);
		int max = read_trimpot();
		max = max/ajustavelmax();

		print_from_program_space("Press B");
		lcd_goto_xy(0,1);
		print_from_program_space("And Wait");
		wait_for_button_press(BUTTON_B);
		wait_for_button_release(BUTTON_B);
		delay_ms(100);

		adelante(max);
		delay_ms(500);
		giroIzquierda(max);

		detenerse();
	}
}
